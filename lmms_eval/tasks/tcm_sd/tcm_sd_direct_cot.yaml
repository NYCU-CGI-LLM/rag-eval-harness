dataset_path: json
dataset_kwargs:
  data_files: lmms_eval/tasks/tcm_sd/dataset/tcm_sd_test_rc_direct.json
task: tcm_sd_direct_cot
test_split: train
output_type: generate_until
doc_to_text: !function utils.tcm_sd_doc_to_text_direct
doc_to_target: "expected_answer"
generation_kwargs:
  until:
    - "ASSISTANT:"
  max_new_tokens: 2048
  temperature: 0
  top_p: 1.0
  num_beams: 1
  do_sample: false
process_results: !function utils.tcm_sd_process_results_direct
metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true
    ignore_case: true
    ignore_punctuation: true
    ignore_numbers: true
  - metric: hit_rate
    aggregation: !function utils.tcm_sd_aggregate_results_hit_rate
    higher_is_better: true
metadata:
  version: 0.0
lmms_eval_specific_kwargs:
  default:
    pre_prompt: "你是一位中医专家，请根据以下患者的临床信息，诊断出最符合的中医证候。"
    post_prompt: "请运用中医辨证思维进行分析：首先分析患者的主要症状和体征，然后结合中医理论进行病机分析，最后得出最符合的证候诊断。请逐步推理并在最后一行明确给出证候名称："